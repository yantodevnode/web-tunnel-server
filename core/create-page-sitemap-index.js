const dir = process.cwd();
const config = require(dir+"/config.json");

module.exports = async (data,url)=>{
  let sendBack=`<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="text/xsl" href="`+url.origin+`/main-sitemap.xsl"?>
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
`;
  for(let path of data){
    sendBack+=`  <sitemap>
`;
    const uri = url.origin+config["path-sitemap-urlset"]+path;
    sendBack+=`    <loc>`+uri+`</loc>
`;
    sendBack+=`    <lastmod>`+new Date().toISOString()+`</lastmod>
`;
    sendBack+=`  </sitemap>
`;
  };
  sendBack+=`</sitemapindex>
<!-- XML Sitemap generated by NodeJs -->`;
  return sendBack;
};